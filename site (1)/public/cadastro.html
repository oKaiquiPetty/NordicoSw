<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nordicoSW|Cadastro</title>
    <link rel="stylesheet" href="js/funcoes.js">
    <link rel="stylesheet" href="css/estilo.css">
    <link rel="stylesheet" href="css/cadastro copy.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>        
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend&family=Merriweather:ital,wght@0,900;1,900&display=swap');
      </style>
</head>

<body style=" background-image: url(assets/cadastro.avif);"  class="background" >
    <header class="  header-background">
        <div class=" margin header-container">
          <div class="logo">
            <p><img src="assets/logo.png" ></p>
          </div>
            <div class="navbar home-contato">
              <ul>
                
                <li><a href="#footer">Contato</a></li>
              </ul>
            </div>
            <div class="navbar login-botao">    
              
              <li><a href="login(oficial).html">Login</a></li>
    
    
                <li><a href="site.html">home</a></li>
              
            </div> 
        </div>                 
      </header>
    
    
      <div class="margin cadastro-container">
        <div class="cadastro-conteudo">
            <h1 >Estamos contigo! vamos l√°, <br> s√£o poucos passos prometo</h1>
            <div class="cadastro-input">
                    <div class="input-esquerdo">
                        <div>
                            <p>Nome completo<span style="color: red;">*</span></p>
                            <div id="div_input_nome" class="div-input">
                                <input class="inputs"  type="text" id="input_nome" >
                                <div id="div_nome" style="color: red;"></div>
                            </div>
                        </div>
                        <div>
                            <p>Email<span style="color: red;">*</span></p>
                            <div id="div_input_email" class="div-input">
                                <input class="inputs" ; type="email" id="input_email">
                                <div id="div_email" style="color: red;"></div>
                            </div>
                        </div>
                       
                    </div>
                    
                    

                    <div class="input-direito">
                        <div>

                            <p>Senha<span style="color: red;">*</span></p>
                            <div id="div_input_senha" class="div-input">
                                <input class="inputs"  type="password" id="input_senha">
                                <div id="div_senha" style="color: red;"></div>
                            </div>
                        </div>
                        <div>
                            <p>Repetir Senha<sid="div_input"pan style="color: red;">*</span></p>
                            <div id="div_input_repetir_senha" class="div-input">
                                <input class="inputs" ; type="password" id="input_confirma">
                                <div id="div_confirmasenha" style="color: red;"></div>
                            </div>
                        </div>
                    </div>     
                </div>
                <div class="div-botao">
                    <p style="color: #fff;">J√° possui uma conta?</p><a href="login(oficial).html" > fa√ßa Login.</a>
                    <button  class="cadastro-botao" onclick="cadastre()">Criar conta</button>
                </div>
                
        </div>
        <div class="cadastro-img ">
            <img width="700px" src="assets/logo3.png" alt="cadastre-se"> 
            <br>
            <p> <h1 >O que voc√™ est√° esperando <br>
                preencha os campos, vamos l√° <br>
            suas metas te aguardam !! :)</h1></p>
        </div>
    </div>


    <footer id="footer" class="footer">
        <div class="margin footer-conteudo">
          <div class="footer-fale-conosco">
            <h3>Fale conosco</h3>
            
             <ul >
              <li><a href="mailto:KPhysics@gmail.com"><img src="/assets/Email.png" alt="">KPhysics@email.com</a></li>
              <li><a href="tel:11911779018"><img src="/assets/Phone.png" alt="">11911779018</a></li>
            </ul>
          </div>
          <div class="footer-redes" >
            <h3>Redes Sociais</h3>
            <ul class="redes-icon">
              <li><a href=""><img src="assets/Instagram.png" alt="">@nordicos_sw</a></li>
              <li><a href=""><img src="assets/Instagram.png" alt="">@K-Physics</a></li> 
            </ul>
          </div>
          
    
        </div>
        <div class="margin footer-direitos">
          <h3 style="color: #fff;">K-Physics</h3>
          <span>¬© 2023 K-Physics. Todos os direitos reservados.</span>
        </div>
      </footer>
</body>

</html>
<script>
        function cadastre() {
        //aguardar();
        
        //Recupere o valor da nova input pelo nome do id
        // Agora v√° para o m√©todo fetch logo abaixo
        
        var emailVar = input_email.value
        
        var nomeVar = input_nome.value
        var senhaVar = input_senha.value
        var confirmarVar = input_confirma.value
        
        var emailValido = emailVar.endsWith('@gmail.com') ||
        emailVar.endsWith('@hotmail.com') ||
        emailVar.endsWith('@outlook.com') ||
        emailVar.endsWith('@sptech.school')
        

        if (nomeVar == "" ||  emailVar == "" || senhaVar == "" || confirmarVar ==""  ) {
            //cardErro.style.display = "block"
            swal("Ops", "Preencha todos os campos üò†", "error")


           
            return false;
        }else if( confirmarVar != senhaVar){
                swal("ops", "As senhas est√£o diferente", "error")
                return false;
        } else if (senhaVar.length < 8) {
            swal("Ops", "A senha inserida √© muito curta. Por favor,insira uma senha com pelo menos 8 caracteres üò†", "warning")
            return false;
        }else if (emailValido == false) {
            swal("Ops", "O e-mail cadastrado √© inv√°lido. Por favor, insira um e-mail v√°lido üò†", "warning")
            return false;
        } else {window.location = "login(oficial).html"}
            
            // Enviando o valor da nova input
            fetch("/usuarios/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora v√° para o arquivo routes/usuario.js
                    nomeServer: nomeVar,
                    emailServer: emailVar,
                    senhaServer: senhaVar,
                   

                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    //cardErro.style.display = "block";
                    swal("Par√°bens", "Cadastro realizado com sucesso redirecionando a tela de login üòÑ...!", "success");


                    setTimeout(() => {
                        window.location = "login.html";
                    }, 3000)

                   
                   
                } else {
                    swal("Ops", "Mais de um usu√°rio com o mesmo login e senha üò≠!")
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
              
            });

            return false;
        }


    //function sumirMensagem() {
        //cardErro.style.display = "none"
    //}


</script>